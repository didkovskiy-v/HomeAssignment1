/*
  * Vatslav Didkovskiy
  * st142215@student.spbu.ru
  * HomeAssignment3
  */
#include <gtest/gtest.h>
#include "Autobot.h"
#include "Decepticon.h"
#include "Neutral.h"
#include <sstream>
#include <vector>

TEST(TransformerTest, DirectCallAutobot) {
    Autobot a("Optimus", 10, 150, 50, 30, "None");
    a.Transform();
    a.Move();
    a.Fire();
}

TEST(TransformerTest, ViaBasePointer) {
    Autobot a("Bee", 5, 100, 30, 20, "Optimus");
    Transformer* p = &a;
    p->Transform();
    p->Move();
    p->Fire();
}

TEST(TransformerTest, VectorOfTransformers) {
    std::vector<Transformer*> bots;
    bots.push_back(new Autobot("A1", 1, 50, 10, 5, "L"));
    bots.push_back(new Autobot("A2", 1, 50, 10, 5, "L"));
    bots.push_back(new Autobot("A3", 1, 50, 10, 5, "L"));
    bots.push_back(new Decepticon("D1", 1, 50, 10, 5, false, "Tank"));
    bots.push_back(new Decepticon("D2", 1, 50, 10, 5, true, "Jet"));
    bots.push_back(new Decepticon("D3", 1, 50, 10, 5, false, "Gun"));
    bots.push_back(new Neutral("N1", 1, 50, 10, 5, "Guild"));
    bots.push_back(new Neutral("N2", 1, 50, 10, 5, "None"));
    bots.push_back(new Neutral("N3", 1, 50, 10, 5, "Free"));

    for (auto* bot : bots) {
        bot->Transform();
        bot->Move();
        bot->Fire();
        delete bot;
    }
}

TEST(TransformerTest, StreamOperator) {
    Autobot a("Test", 1, 50, 10, 5, "Leader");
    std::ostringstream oss;
    oss << a;
    EXPECT_FALSE(oss.str().empty());
}

